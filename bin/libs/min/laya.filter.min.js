!function(t,e,a){var i=(a.un,a.uns,a["static"]),r=a["class"],n=a.getset,s=(a.__newvec,laya.utils.Browser),l=laya.filters.ColorFilterAction,u=(laya.display.Sprite,laya.filters.Filter),o=laya.maths.Matrix,c=(laya.maths.Rectangle,laya.maths.Point,laya.renders.Render),h=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.system.System,laya.utils.RunDriver),d=laya.webgl.submit.SubmitCMD,f=laya.filters.webgl.ColorFilterActionGL,g=laya.utils.Color,y=laya.resource.Texture,_=laya.filters.webgl.FilterActionGL,w=laya.webgl.shader.d2.value.Value2D,x=(laya.webgl.shader.d2.ShaderDefines2D,laya.webgl.canvas.BlendMode),p=laya.webgl.resource.RenderTarget2D,v=function(){function t(){this.data=null}r(t,"laya.filters.GlowFilterAction");var e=t.prototype;return a.imps(e,{"laya.filters.IFilterAction":!0}),e.apply=function(e){var a=e.ctx.ctx,i=e.ctx.ctx.canvas,r=t.Canvas,n=t.Ctx;return r.width=i.width,r.height=i.height,n.shadowBlur=this.data.blur,n.shadowOffsetX=this.data.offX,n.shadowOffsetY=this.data.offY,n.drawImage(i,0,0),a.width=a.width,a.drawImage(r,0,0),i},i(t,["Canvas",function(){return this.Canvas=s.createElement("canvas")},"Ctx",function(){return this.Ctx=t.Canvas.getContext("2d")}]),t}(),b=function(){function t(){}return r(t,"laya.filters.WebGLFilter"),t.enable=function(){t.isInit||(t.isInit=!0,c.isWebGL&&(h.createFilterAction=function(t){var e;switch(t){case 32:e=new f;break;case 16:e=new T;break;case 8:e=new F}return e}))},t.isInit=!1,t.__init$=function(){h.createFilterAction=function(t){var e;switch(t){case 16:e=new m;break;case 8:e=new v;break;case 32:e=new l}return e}},t}(),m=function(t){function e(t){this.strength=NaN,void 0===t&&(t=4),b.enable(),e.__super.call(this),this.strength=t,this._action=h.createFilterAction(16),this._action.data=this}r(e,"laya.filters.BlurFilter",t);var a=e.prototype;return n(0,a,"action",function(){return this._action}),n(0,a,"type",function(){return 16}),e}(u),T=(function(t){function e(t,a,i,r){this._color=null,e.__super.call(this),this._elements=new Float32Array(9),void 0===a&&(a=4),void 0===i&&(i=6),void 0===r&&(r=6),b.enable(),this._color=new g(t),this.blur=a,this.offX=i,this.offY=r,this._action=h.createFilterAction(8),this._action.data=this}r(e,"laya.filters.GlowFilter",t);var a=e.prototype;return a.getColor=function(){return this._color._color},n(0,a,"type",function(){return 8}),n(0,a,"action",function(){return this._action}),n(0,a,"offX",function(){return this._elements[5]},function(t){this._elements[5]=t}),n(0,a,"offY",function(){return this._elements[6]},function(t){this._elements[6]=t}),n(0,a,"blur",function(){return this._elements[4]},function(t){this._elements[4]=t}),e}(u),function(t){function e(){this.data,e.__super.call(this)}r(e,"laya.filters.webgl.BlurFilterActionGL",t);var a=e.prototype;return a.setValueMix=function(t){t.defines.add(this.data.type)},a.apply3d=function(t,e,a,i,r){var n=t.getValue("bounds"),s=w.create(1,0);s.setFilters([this.data]);var l=o.EMPTY;l.identity(),a.ctx.drawTarget(t,0,0,n.width,n.height,o.EMPTY,"src",s),s.setFilters(null)},a.setValue=function(t){t.strength=this.data.strength},n(0,a,"typeMix",function(){return 16}),e}(_)),F=function(t){function e(){this.data=null,this._initKey=!1,this._textureWidth=0,this._textureHeight=0,e.__super.call(this)}r(e,"laya.filters.webgl.GlowFilterActionGL",t);var i=e.prototype;return a.imps(i,{"laya.filters.IFilterActionGL":!0}),i.setValueMix=function(t){},i.apply3d=function(t,a,i,r,n){var s=t.getValue("bounds"),l=s.width,u=s.height;this._textureWidth=l,this._textureHeight=u;var c=d.create([t,a,i,0,0],e.tmpTarget);i.ctx.addRenderObject(c);var h,f=o.TEMP;return f.identity(),h=w.create(1,0),h.setFilters([this.data]),i.ctx.drawTarget(t,0,0,this._textureWidth,this._textureHeight,f,"src",h,null,x.TOINT.overlay),c=d.create([t,a,i,0,0],e.startOut),i.ctx.addRenderObject(c),h=w.create(1,0),i.ctx.drawTarget(t,0,0,this._textureWidth,this._textureHeight,f,"tmpTarget",h,y.INV_UV,x.TOINT.overlay),h=w.create(1,0),i.ctx.drawTarget(t,0,0,this._textureWidth,this._textureHeight,f,"src",h),c=d.create([t,a,i,0,0],e.recycleTarget),i.ctx.addRenderObject(c),null},i.setSpriteWH=function(t){this._textureWidth=t.width,this._textureHeight=t.height},i.setValue=function(t){t.u_offsetX=this.data.offX,t.u_offsetY=-this.data.offY,t.u_strength=1,t.u_blurX=this.data.blur,t.u_blurY=this.data.blur,t.u_textW=this._textureWidth,t.u_textH=this._textureHeight,t.u_color=this.data.getColor()},n(0,i,"typeMix",function(){return 8}),e.tmpTarget=function(t,e,a,i,r){var n=t.getValue("bounds"),s=t.getValue("out");s.end();var l=p.create(n.width,n.height);l.start(),l.clear(0,0,0,0),t.addValue("tmpTarget",l)},e.startOut=function(t,e,a,i,r){var n=t.getValue("tmpTarget");n.end();var s=t.getValue("out");s.start(),s.clear(0,0,0,0)},e.recycleTarget=function(t,e,a,i,r){var n=(t.getValue("src"),t.getValue("tmpTarget"));n.recycle()},e}(_);a.__init([b])}(window,document,Laya);