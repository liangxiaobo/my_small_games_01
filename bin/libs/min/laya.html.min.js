!function(window,document,Laya){var __un=Laya.un,__uns=Laya.uns,__static=Laya["static"],__class=Laya["class"],__getset=Laya.getset,__newvec=Laya.__newvec,CSSStyle=laya.display.css.CSSStyle,ClassUtils=laya.utils.ClassUtils,Node=laya.display.Node,WebGL=laya.webgl.WebGL,Rectangle=laya.maths.Rectangle,URL=laya.net.URL,Sprite=laya.display.Sprite,Event=laya.events.Event,Loader=laya.net.Loader,Browser=laya.utils.Browser,HTMLChar=laya.utils.HTMLChar,RenderSprite=laya.renders.RenderSprite,Utils=laya.utils.Utils,Stat=laya.utils.Stat,RenderContext=laya.renders.RenderContext,Texture=laya.resource.Texture,load=Laya.load,HTMLParse=function(){function t(){}return __class(t,"laya.html.utils.HTMLParse"),t.parse=function(e,n,a){n="<root>"+n+"</root>",n=n.replace(t.spacePattern,t.char255);var i=(new Browser.window.DOMParser).parseFromString(n,"text/xml");t._parseXML(e,i.childNodes[0].childNodes,a)},t._parseXML=function(e,n,a,i){var r=0,s=0;if(n.item)for(r=0,s=n.length;s>r;++r)t._parseXML(e,n[r],a,i);else{var o,l;if(3==n.nodeType){var h;return void(e instanceof laya.html.dom.HTMLDivElement?(l=n.nodeName.toLowerCase(),h=n.textContent.replace(/^\s+|\s+$/g,""),h.length>0&&(o=e.addChild(ClassUtils.getInstance(l)),o.innerTEXT=h.replace(t.char255AndOneSpacePattern," "))):(h=n.textContent.replace(/^\s+|\s+$/g,""),h.length>0&&(e.innerTEXT=h.replace(t.char255AndOneSpacePattern," "))))}if(l=n.nodeName.toLowerCase(),"#comment"==l)return;o=e.addChild(ClassUtils.getInstance(l)),o.URI=a,o.href=i;var u=n.attributes;if(u&&u.length>0)for(r=0,s=u.length;s>r;++r){var _=u[r],c=_.nodeName,f=_.value;o.setValue(c,f)}t._parseXML(o,n.childNodes,a,o.href)}},t.char255=String.fromCharCode(255),t.spacePattern=/&nbsp;|&#160;/g,t.char255AndOneSpacePattern=new RegExp(String.fromCharCode(255)+"|(\\s+)","g"),t}(),Layout=function(){function t(){}return __class(t,"laya.html.utils.Layout"),t.later=function(e){null==t._will&&(t._will=[],Laya.stage.frameLoop(1,null,function(){if(!(t._will.length<1)){for(var e=0;e<t._will.length;e++)laya.html.utils.Layout.layout(t._will[e]);t._will.length=0}})),t._will.push(e)},t.layout=function(e){return 0===(512&e._style._type)?null:(e._style._type&=-513,t._multiLineLayout(e))},t._multiLineLayout=function(e){function n(){M.y=b,b+=M.h+f,M.mWidth=C,C=0,M=new LayoutLine,E.push(M),M.h=0,T=0,N=!0,H=!1}var a=new Array;e._addChildsToLayout(a);var i,r,s,o,l,h=0,u=a.length,_=e._getCSSStyle(),c=_.letterSpacing,f=_.leading,p=_.lineHeight,d=_._widthAuto()||!_.wordWrap,m=d?999999:e.width,y=(e.height,0),g=_.italic?_.fontSize/3:0,L=_._getAlign(),w=_._getValign(),v=0!==w||0!==L||0!=p,T=0,b=0,x=0,S=0,E=new Array,M=E[0]=new LayoutLine,H=!1,A=!1;M.h=0,_.italic&&(m-=_.fontSize/3);var C=0,N=!0;for(h=0;u>h;h++)if(i=a[h],null!=i)if(N=!1,i instanceof laya.html.dom.HTMLBrElement)n();else{if(i._isChar()){if(o=i,o.isWord)H=A||"\n"===o["char"],M.wordStartIndex=M.elements.length;else{if(E.length>0&&T+x>m&&M.wordStartIndex>0){var I=0;I=M.elements.length-M.wordStartIndex+1,M.elements.length=M.wordStartIndex,h-=I,n();continue}H=!1,C+=o.width}x=o.width+c,S=o.height,A=!1,H=H||T+x>m,H&&n(),M.minTextHeight=Math.min(M.minTextHeight,i.height)}else if(r=i._getCSSStyle(),l=i,s=r.padding,0===r._getCssFloat()||(v=!0),H=A||r.lineElement,x=l.viewWidth+s[1]+s[3]+c,S=l.viewHeight+s[0]+s[2],A=r.lineElement,H=H||T+x>m&&r.wordWrap){h-=1,H&&n();continue}M.elements.push(i),M.h=Math.max(M.h,S),i.x=T,i.y=b,T+=x,M.w=T-c,M.y=b,y=Math.max(T+g,y)}else N||(T+=t.DIV_ELEMENT_PADDING),M.wordStartIndex=M.elements.length;if(b=M.y+M.h,v){var O=0;for(h=0,u=E.length;u>h;h++)E[h].updatePos(0,m,h,O,L,w,p),O+=Math.max(p,E[h].h)}return d&&(e.width=y),b>e.height&&(e.height=b),[y,b]},t._will=null,t.DIV_ELEMENT_PADDING=10,t}(),LayoutLine=function(){function t(){this.x=0,this.y=0,this.w=0,this.h=0,this.wordStartIndex=0,this.minTextHeight=99999,this.mWidth=0,this.elements=new Array}__class(t,"laya.html.utils.LayoutLine");var e=t.prototype;return e.updatePos=function(t,e,n,a,i,r,s){var o,l=0;this.elements.length>0&&(o=this.elements[this.elements.length-1],l=o.x+o.width-this.elements[0].x);var h=0,u=NaN;1===i&&(h=(e-l)/2),2===i&&(h=e-l),0===s||0!=r||(r=1);for(var _=0,c=this.elements.length;c>_;_++){o=this.elements[_];var f=o._getCSSStyle();switch(0!==h&&(o.x+=h),f._getValign()){case 0:o.y=a;break;case 1:var p=0;99999!=this.minTextHeight&&(p=this.minTextHeight);var d=(p+s)/2;d=Math.max(d,this.h),u=o instanceof laya.html.dom.HTMLImageElement?a+d-o.height:a+d-o.height,o.y=u;break;case 2:o.y=a+(s-o.height)}}},t}(),TestHTML=function(){function t(){var t,e=this,e=this,n=function(a){return 25>a?(WebGL.enable(),Laya.init(Browser.width,800),Laya.stage.bgColor="#FFFFFF",Laya.stage.hasOwnProperty("width"),Laya.await(e,n,31),load("html/Minions.html")):32>a?(Laya.await(e,n,32),load("html/test.css")):void(33>a&&(t=Laya.stage.addChild(new HTMLIframeElement),t.pos(0,0),t.style.cssText("width:800;height:600"),t.href="html/Minions.html",Laya.stage.on("link",this,e.onTest)))};n.call(this,0)}__class(t,"TestHTML");var e=t.prototype;return e.onTest=function(t){Browser.window.open(t)},t.__init$=function(){"/***********************************/\n/*http://www.layabox.com 2015/12/20*/\n/***********************************/\nwindow.Laya=(function(window,document){\n	var Laya={\n		__internals:[],\n		__packages:{},\n		__classmap:{'Object':Object,'Function':Function,'Array':Array,'String':String},\n		__sysClass:{'object':'Object','array':'Array','string':'String','dictionary':'Dictionary'},\n		__propun:{writable: true,enumerable: false,configurable: true},\n		__presubstr:String.prototype.substr,\n		__substr:function(ofs,sz){return arguments.length==1?Laya.__presubstr.call(this,ofs):Laya.__presubstr.call(this,ofs,sz>0?sz:(this.length+sz));},\n		__init:function(_classs){_classs.forEach(function(o){o.__init$ && o.__init$();});},\n		__parseInt:function(value){return !value?0:parseInt(value);},\n		__isClass:function(o){return o && (o.__isclass || o==Object || o==String || o==Array);},\n		__newvec:function(sz,value){\n			var d=[];\n			d.length=sz;\n			for(var i=0;i<sz;i++) d[i]=value;\n			return d;\n		},\n		__extend:function(d,b){\n			for (var p in b){\n				if (!b.hasOwnProperty(p)) continue;\n				var g = b.__lookupGetter__(p), s = b.__lookupSetter__(p); \n				if ( g || s ) {\n					g && d.__defineGetter__(p, g);\n					s && d.__defineSetter__(p, s);\n				} \n				else d[p] = b[p];\n			}\n			function __() { Laya.un(this,'constructor',d); }__.prototype=b.prototype;d.prototype=new __();Laya.un(d.prototype,'__imps',Laya.__copy({},b.prototype.__imps));\n		},\n		__copy:function(dec,src){\n			if(!src) return null;\n			dec=dec||{};\n			for(var i in src) dec[i]=src[i];\n			return dec;\n		},\n		__package:function(name,o){\n			if(Laya.__packages[name]) return;\n			Laya.__packages[name]=true;\n			var p=window,strs=name.split('.');\n			if(strs.length>1){\n				for(var i=0,sz=strs.length-1;i<sz;i++){\n					var c=p[strs[i]];\n					p=c?c:(p[strs[i]]={});\n				}\n			}\n			p[strs[strs.length-1]] || (p[strs[strs.length-1]]=o||{});\n		},\n		__hasOwnProperty:function(name,o){\n			o=o ||this;\n		    function classHas(name,o){\n				if(Object.hasOwnProperty.call(o.prototype,name)) return true;\n				var s=o.prototype.__super;\n				return s==null?null:classHas(name,s);\n			}\n			return (Object.hasOwnProperty.call(o,name)) || classHas(name,o.__class);\n		},\n		__typeof:function(o,value){\n			if(!o || !value) return false;\n			if(value==String) return (typeof o=='string');\n			if(value==Number) return (typeof o=='number');\n			if(value.__interface__) value=value.__interface__;\n			else if(typeof value!='string')  return (o instanceof value);\n			return (o.__imps && o.__imps[value]) || (o.__class==value);\n		},\n		__as:function(value,type){\n			return (this.__typeof(value,type))?value:null;\n		},		\n		interface:function(name,_super){\n			Laya.__package(name,{});\n			var ins=Laya.__internals;\n			var a=ins[name]=ins[name] || {};\n			a.self=name;\n			if(_super)a.extend=ins[_super]=ins[_super] || {};\n			var o=window,words=name.split('.');\n			for(var i=0;i<words.length-1;i++) o=o[words[i]];o[words[words.length-1]]={__interface__:name};\n		},\n		class:function(o,fullName,_super,miniName){\n			_super && Laya.__extend(o,_super);\n			if(fullName){\n				Laya.__package(fullName,o);\n				Laya.__classmap[fullName]=o;\n				if(fullName.indexOf('.')>0){\n					if(fullName.indexOf('laya.')==0){\n						var paths=fullName.split('.');\n						miniName=miniName || paths[paths.length-1];\n						if(Laya[miniName]) debugger;\n						Laya[miniName]=o;\n					}					\n				}\n				else {\n					if(fullName==\"Main\")\n						window.Main=o;\n					else{\n						if(Laya[fullName]){\n							console.log(\"Err!,Same class:\"+fullName,Laya[fullName]);\n							debugger;\n						}\n						Laya[fullName]=o;\n					}\n				}\n			}\n			var un=Laya.un,p=o.prototype;\n			un(p,'hasOwnProperty',Laya.__hasOwnProperty);\n			un(p,'__class',o);\n			un(p,'__super',_super);\n			un(p,'__className',fullName);\n			un(o,'__super',_super);\n			un(o,'__className',fullName);\n			un(o,'__isclass',true);\n			un(o,'super',function(o){this.__super.call(o);});\n		},\n		imps:function(dec,src){\n			if(!src) return null;\n			var d=dec.__imps|| Laya.un(dec,'__imps',{});\n			for(var i in src){\n				d[i]=src[i];\n				var c=i;\n				while((c=this.__internals[c]) && (c=c.extend) ){\n					c=c.self;d[c]=true;\n				}\n			}\n		},		\n		getset:function(isStatic,o,name,getfn,setfn){\n			if(!isStatic){\n				getfn && Laya.un(o,'_$get_'+name,getfn);\n				setfn && Laya.un(o,'_$set_'+name,setfn);\n			}\n			else{\n				getfn && (o['_$GET_'+name]=getfn);\n				setfn && (o['_$SET_'+name]=setfn);\n			}\n			if(getfn && setfn) \n				Object.defineProperty(o,name,{get:getfn,set:setfn,enumerable:false});\n			else{\n				getfn && Object.defineProperty(o,name,{get:getfn,enumerable:false});\n				setfn && Object.defineProperty(o,name,{set:setfn,enumerable:false});\n			}\n		},\n		static:function(_class,def){\n				for(var i=0,sz=def.length;i<sz;i+=2){\n					if(def[i]=='length') \n						_class.length=def[i+1].call(_class);\n					else{\n						function tmp(){\n							var name=def[i];\n							var getfn=def[i+1];\n							Object.defineProperty(_class,name,{\n								get:function(){delete this[name];return this[name]=getfn.call(this);},\n								set:function(v){delete this[name];this[name]=v;},enumerable: true,configurable: true});\n						}\n						tmp();\n					}\n				}\n		},		\n		un:function(obj,name,value){\n			arguments.length<3 &&(value=obj[name]);\n			Laya.__propun.value=value;\n			Object.defineProperty(obj, name, Laya.__propun);\n			return value;\n		},\n		uns:function(obj,names){\n			names.forEach(function(o){Laya.un(obj,o)});\n		}\n	};\n\n	window.console=window.console || ({log:function(){}});\n	window.trace=window.console.log;\n	Error.prototype.throwError=function(){throw arguments;};\n	String.prototype.substr=Laya.__substr;\n	Object.defineProperty(Array.prototype,'fixed',{enumerable: false});\n";"	var iflash=window.iflash={utils:{}};\n	var LAYABOX=window.LAYABOX=window.LAYABOX || {\n		classmap:Laya.__classmap,\n		systemClass:Laya.__sysClass,\n	};\n	Function.prototype.BIND$ = function(o) {\n			this.__$BiD___ || (this.__$BiD___ = LAYABOX.__bindid++);\n			o.BIND$__ || (o.BIND$__={});\n			var fn=o.BIND$__[this.__$BiD___];\n			if(fn) return fn;\n			return o.BIND$__[this.__$BiD___]=this.bind(o);\n	};\n	Array.CASEINSENSITIVE = 1;\n	Array.DESCENDING = 2;\n	Array.NUMERIC = 16;\n	Array.RETURNINDEXEDARRAY = 8;\n	Array.UNIQUESORT = 4;\n	Object.defineProperty(Array.prototype,'fixed',{enumerable: false});\n	(function(defs){\n		var p=Date.prototype;\n		Object.defineProperty(p,'millisecondsUTC',{get:p.getUTCMilliseconds,enumerable: false});\n		Object.defineProperty(p,'minutesUTC',{get:p.getUTCMinutes,enumerable: false});\n		Object.defineProperty(p,'mouthUTC',{get:p.getUTCMonth,enumerable: false});\n		for(var i=0;i<defs.length;i++)\n			Object.defineProperty(p,defs[i],{get:p['get'+defs[i].charAt(0).toUpperCase()+defs[i].substr(1)]})\n	})(['date','day','fullYear','hours','millseconds','minutes','month','seconds','time','timezoneOffset','dateUTC','dayUTC','fullYearUTC','hoursUTC']);\n	LAYABOX.__bindid=1;	\n	LAYABOX.sortonNameArray2=function(array,name,options){\n		(options===void 0)&& (options=0);\n		var name0=name[0],name1=name[1],type=1;\n		if (options==(16 | 2))type=-1;\n		return array.sort(function(a,b){\n			if (b[name0]==a[name0]){\n				 return type *(a[name1]-b[name1]);\n			}else return type *(a[name0]-b[name0]);\n		});\n	};\n	LAYABOX.sortonNameArray=function(array,name,options){\n		(options===void 0)&& (options=0);\n		var name0=name[0],type=1;\n		(options==(16 | 2)) && (type=-1);\n		return array.sort(function(a,b){\n			if (b[name0]==a[name0]){\n				for (var i=1,sz=name.length;i < sz;i++){\n					var tmp=name[i];\n					if (b[tmp]!=a[tmp])return type *(a[tmp]-b[tmp]);\n				}\n				return 0;\n			}\n			else return type *(a[name0]-b[name0]);\n		});\n	};\n	LAYABOX.arraypresort=Array.prototype.sort;\n	Laya.un(Array.prototype,'sortOn',function(name,options){\n		if(name instanceof Function) return this.sort(name);\n		if((name instanceof Array)){\n			if(name.length==0)return this;\n			if(name.length==2)return LAYABOX.sortonNameArray2(this,name,options);\n			if(name.length>2)return LAYABOX.sortonNameArray(this,name,options);name=name[0];\n		}\n		if (options==16)return this.sort(function(a,b){return a[name]-b[name];});\n		if (options==2)return this.sort(function(a,b){return b[name]-a[name];});\n		if (options==(16 | 2))return this.sort(function(a,b){return b[name]-a[name];});\n		if (options==1) return this.sort();\n		return this.sort(function(a,b){return a[name]-b[name];});\n	});\n	Laya.un(Array.prototype,'sort',function(value){\n		if(value==16) return LAYABOX.arraypresort.call(this,function (a, b) {return a - b;});\n		if(value==(16|2)) return LAYABOX.arraypresort.call(this,function (a, b) {return b - a;});\n		if(value==1) return LAYABOX.arraypresort.call(this);\n		return LAYABOX.arraypresort.call(this,value);\n	});\n	LAYABOX.bind=function(obj,fn){\n		return obj==null || fn==null?null:fn.BIND$(obj);\n	};\n"},t}(),HTMLElement=function(_super){function HTMLElement(){this.URI=null,this._href=null,HTMLElement.__super.call(this),this._text=HTMLElement._EMPTYTEXT,this.setStyle(new CSSStyle(this)),this._getCSSStyle().valign="middle",this.mouseEnabled=!0}__class(HTMLElement,"laya.html.dom.HTMLElement",_super);var __proto=HTMLElement.prototype;return __proto.appendChild=function(t){return this.addChild(t)},__proto._getWords=function(){var t=this._text.text;if(!t||0===t.length)return null;var e=this._text.words;if(e&&e.length===t.length)return e;null===e&&(this._text.words=e=[]),e.length=t.length;for(var n,a=this.style,i=a.font,r=0,s=t.length;s>r;r++){n=Utils.measureText(t[r],i);var o=e[r]=new HTMLChar(t[r],n.width,n.height,a);if(this.href){var l=new Sprite;this.addChild(l),o.setSprite(l)}}return e},__proto.showLinkSprite=function(){var t=this._text.words;if(t)for(var e,n,a=[],i=0;i<t.length;i++)n=t[i],e=new Sprite,e.graphics.drawRect(0,0,n.width,n.height,"#ff0000"),e.width=n.width,e.height=n.height,this.addChild(e),a.push(e)},__proto.layoutLater=function(){var t=this.style;512&t._type||(t.widthed(this)&&(this._childs.length>0||null!=this._getWords())&&t.block?(Layout.later(this),t._type|=512):this.parent&&this.parent.layoutLater())},__proto.setValue=function(t,e){switch(t){case"style":return void this.style.cssText(e);case"class":return void(this.className=e)}_super.prototype.setValue.call(this,t,e)},__proto.updateHref=function(){if(null!=this._href){var t=this._getWords();if(t)for(var e,n,a=0;a<t.length;a++)if(e=t[a],n=e.getSprite()){var i=e.height-1;n.graphics.drawLine(0,i,e.width,i,e._getCSSStyle().color),n.size(e.width,e.height),n.on("click",this,this.onLinkHandler)}}},__proto.onLinkHandler=function(t){switch(t.type){case"click":Laya.stage.event("link",[this.href])}},__proto.formatURL=function(t){return URL.formatURL(t,this.URI?this.URI.path:null)},__getset(0,__proto,"color",null,function(t){this.style.color=t}),__getset(0,__proto,"id",null,function(t){HTMLDocument.document.setElementById(t,this)}),__getset(0,__proto,"href",function(){return this._href},function(t){this._href=t,null!=t&&(this.on("click",this,this.onLinkHandler),this.updateHref())}),__getset(0,__proto,"parent",_super.prototype._$get_parent,function(t){if(t instanceof laya.html.dom.HTMLElement){var e=t;this.URI||(this.URI=e.URI),this.style.inherit(e.style)}_super.prototype._$set_parent.call(this,t)}),__getset(0,__proto,"className",null,function(t){this.style.attrs(HTMLDocument.document.styleSheets["."+t])}),__getset(0,__proto,"text",function(){return this._text.text},function(t){this._text==HTMLElement._EMPTYTEXT?this._text={text:t,words:null}:(this._text.text=t,this._text.words&&(this._text.words.length=0)),this._renderType|=2048,this.repaint(),this.updateHref()}),__getset(0,__proto,"innerTEXT",function(){return this._text.text},function(t){this.text=t}),__getset(0,__proto,"style",function(){return this._style}),__getset(0,__proto,"onClick",null,function(value){var fn;eval("fn=function(event){"+value+";}"),this.on("click",this,fn)}),HTMLElement._EMPTYTEXT={text:null,words:null},HTMLElement}(Sprite),HTMLBrElement=function(t){function e(){e.__super.call(this),this.style.lineElement=!0,this.style.block=!0}return __class(e,"laya.html.dom.HTMLBrElement",t),e}(HTMLElement),HTMLDivElement=function(t){function e(){this.contextHeight=NaN,this.contextWidth=NaN,e.__super.call(this),this.style.block=!0,this.style.lineElement=!0,this.style.width=200,this.style.height=200}__class(e,"laya.html.dom.HTMLDivElement",t);var n=e.prototype;return n.appendHTML=function(t){HTMLParse.parse(this,t,this.URI),this.layout()},n._addChildsToLayout=function(t){var e=this._getWords();if(null==e&&0==this._childs.length)return!1;e&&e.forEach(function(e){t.push(e)});var n=!0;return this._childs.forEach(function(e){n?n=!1:t.push(null),e._addToLayout(t)}),!0},n._addToLayout=function(t){this.layout()},n.layout=function(){this.style._type|=512;var t=Layout.layout(this);if(t){this._$P.mHtmlBounds||this._set$P("mHtmlBounds",new Rectangle);var e=this._$P.mHtmlBounds;e.x=e.y=0,e.width=this.contextWidth=t[0],e.height=this.contextHeight=t[1],this.setBounds(e)}},__getset(0,n,"innerHTML",null,function(t){this.removeChildren(),this.appendHTML(t)}),__getset(0,n,"height",function(){return this._height?this._height:this.contextHeight},t.prototype._$set_height),__getset(0,n,"width",function(){return this._width?this._width:this.contextWidth},t.prototype._$set_width),e}(HTMLElement),HTMLDocument=function(t){function e(){this.all=new Array,this.styleSheets=CSSStyle.styleSheets,e.__super.call(this)}__class(e,"laya.html.dom.HTMLDocument",t);var n=e.prototype;return n.getElementById=function(t){return this.all[t]},n.setElementById=function(t,e){this.all[t]=e},__static(e,["document",function(){return this.document=new e}]),e}(HTMLElement),HTMLImageElement=function(t){function e(){this._tex=null,this._url=null,this._renderArgs=[],e.__super.call(this),this.style.block=!0}__class(e,"laya.html.dom.HTMLImageElement",t);var n=e.prototype;return n._addToLayout=function(t){!this._style.absolute&&t.push(this)},n.render=function(t,e,n){!this._tex||!this._tex.loaded||!this._tex.loaded||this._width<1||this._height<1||(Stat.spriteDraw++,this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,t.ctx.drawTexture2(e,n,this.style.translateX,this.style.translateY,this.transform,this.style.alpha,this.style.blendMode,this._renderArgs))},__getset(0,n,"src",null,function(t){function e(){var t=n._style;t.widthed(n)?-1:n._tex.width,t.heighted(n)?-1:n._tex.height;t.widthed(n)||n._width==n._tex.width||(n.width=n._tex.width,n.parent&&n.parent.layoutLater()),t.heighted(n)||n._height==n._tex.height||(n.height=n._tex.height,n.parent&&n.parent.layoutLater())}var n=this;if(t=this.formatURL(t),this._url!=t){this._url=t,this._tex=Loader.getRes(t),this._tex||(this._tex=new Texture,this._tex.load(t),Loader.cacheRes(t,this._tex));var a=this._tex=Loader.getRes(t);a||(this._tex=a=new Texture,a.load(t),Loader.cacheRes(t,a)),a.loaded?e():a.on("loaded",null,e)}}),e}(HTMLElement),HTMLLinkElement=function(t){function e(){this.type=null,e.__super.call(this),this.visible=!1}__class(e,"laya.html.dom.HTMLLinkElement",t);var n=e.prototype;return n._onload=function(t){switch(this.type){case"text/css":CSSStyle.parseCSS(t,this.URI)}},__getset(0,n,"href",t.prototype._$get_href,function(t){var e=this;t=this.formatURL(t),this.URI=new URL(t);var n=new Loader;n.once("complete",null,function(t){e._onload(t)}),n.load(t,"text")}),e._cuttingStyle=new RegExp("((@keyframes[\\s\\t]+|)(.+))[\\t\\n\\r\\s]*{","g"),e}(HTMLElement),HTMLStyleElement=function(t){function e(){e.__super.call(this),this.visible=!1}__class(e,"laya.html.dom.HTMLStyleElement",t);var n=e.prototype;return __getset(0,n,"text",t.prototype._$get_text,function(t){CSSStyle.parseCSS(t,null)}),e}(HTMLElement),HTMLIframeElement=function(t){function e(){e.__super.call(this),this._getCSSStyle().valign="middle"}__class(e,"laya.html.dom.HTMLIframeElement",t);var n=e.prototype;return __getset(0,n,"href",t.prototype._$get_href,function(t){var e=this;t=this.formatURL(t);var n=new Loader;n.once("complete",null,function(n){var a=e.URI;e.URI=new URL(t),e.innerHTML=n,!a||(e.URI=a)}),n.load(t,"text")}),e}(HTMLDivElement);Laya.__init([TestHTML])}(window,document,Laya);